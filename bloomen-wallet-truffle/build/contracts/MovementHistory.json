{
  "contractName": "MovementHistory",
  "abi": [],
  "metadata": "{\"compiler\":{\"version\":\"0.5.7+commit.6da8b019\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"methods\":{}},\"userdoc\":{\"methods\":{}}},\"settings\":{\"compilationTarget\":{\"/home/jordi/ws/jordiescudero/bloomen-wallet/bloomen-wallet-truffle/contracts/bloomen/token/MovementHistory.sol\":\"MovementHistory\"},\"evmVersion\":\"byzantium\",\"libraries\":{},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[]},\"sources\":{\"/home/jordi/ws/jordiescudero/bloomen-wallet/bloomen-wallet-truffle/contracts/bloomen/token/MovementHistory.sol\":{\"keccak256\":\"0x445ad42cedc97809ddb654e583e39382f0c53452e7d404e93d657c7295ec3c77\",\"urls\":[\"bzzr://0e77083825dc93f4c0bd52df258e0666051ff43fb1918e489b8d6eebec07bea2\"]}},\"version\":1}",
  "bytecode": "0x6080604052348015600f57600080fd5b50604380601d6000396000f3fe6080604052600080fdfea265627a7a72305820d6137eba08ab94ee2ed920bdb37346e8770601ad43b1bb6ac881e1f1731809c56c6578706572696d656e74616cf50037",
  "deployedBytecode": "0x6080604052600080fdfea265627a7a72305820d6137eba08ab94ee2ed920bdb37346e8770601ad43b1bb6ac881e1f1731809c56c6578706572696d656e74616cf50037",
  "sourceMap": "59:2334:8:-;;;;8:9:-1;5:2;;;30:1;27;20:12;5:2;59:2334:8;;;;;;;",
  "deployedSourceMap": "59:2334:8:-;;;;;",
  "source": "pragma solidity ^0.5.2;\npragma experimental ABIEncoderV2;\n\ncontract MovementHistory {\n\n    struct Movement {\n        int256 amount;\n        string description;\n        uint date;\n        address to;\n    }\n  /* \n    mapping (address => Movement[]) private transfersMap_;\n    mapping (address => int256) private currentIndexMap_;\n\n \n    int256 constant private MAX = 100;\n    int256 constant private PAGE_SIZE = 10;\n    int256 constant private MAX_PAGE_NUMBER = MAX/PAGE_SIZE;\n\n    function addMovement(int256 _amount, string memory _description,  address _to) public {\n        _addMovement(_amount, _description, msg.sender, _to);\n    }\n    \n    function _addMovement(int256 _amount, string memory _description,  address _from, address _to) internal {\n        // if (transfersMap_[_from].length < uint256(MAX)) {\n        //     transfersMap_[_from].push(Movement(_amount, _description, now, _to));\n        //     currentIndexMap_[_from] = int256(transfersMap_[_from].length - 1);\n        // } else if (currentIndexMap_[_from] == MAX - 1) {\n        //     currentIndexMap_[_from] = 0;\n        //     transfersMap_[_from][0] = Movement(_amount, _description, now, _to);\n        // } else {\n        //     currentIndexMap_[_from]++;\n        //     transfersMap_[_from][uint256(currentIndexMap_[_from])] = Movement(_amount, _description, now, _to);\n        // }\n    }\n\n\n    function getMovements( int256 _page) public view returns (Movement[] memory) {\n        require(_page > 0 && _page <= MAX_PAGE_NUMBER, \"Invalid page.\");\n\n        uint256 _reqIndexOffset = uint256(PAGE_SIZE * (_page - 1));\n        Movement[] memory transfers = transfersMap_[msg.sender];\n        if (transfers.length <= _reqIndexOffset) {\n            Movement[] memory empty;\n            return empty;\n        }\n\n\n         Movement[] memory _transfersPage = new Movement[](uint256(PAGE_SIZE));\n\n        for (int256 i = 0; i < int(PAGE_SIZE); i++) {\n            int256 _transferIndex = currentIndexMap_[msg.sender] - int256(_reqIndexOffset) - i;\n            if (_transferIndex < 0) {\n                if (transfers.length < uint256(MAX) ) {\n                    return _transfersPage;\n                } else {\n                    _transferIndex += MAX;\n                }\n            }\n            _transfersPage[uint256(i)]= transfers[uint256(_transferIndex)];\n        }\n      \n        return _transfersPage;\n    }\n\n    */\n    \n}",
  "sourcePath": "/home/jordi/ws/jordiescudero/bloomen-wallet/bloomen-wallet-truffle/contracts/bloomen/token/MovementHistory.sol",
  "ast": {
    "absolutePath": "/home/jordi/ws/jordiescudero/bloomen-wallet/bloomen-wallet-truffle/contracts/bloomen/token/MovementHistory.sol",
    "exportedSymbols": {
      "MovementHistory": [
        1939
      ]
    },
    "id": 1940,
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 1928,
        "literals": [
          "solidity",
          "^",
          "0.5",
          ".2"
        ],
        "nodeType": "PragmaDirective",
        "src": "0:23:8"
      },
      {
        "id": 1929,
        "literals": [
          "experimental",
          "ABIEncoderV2"
        ],
        "nodeType": "PragmaDirective",
        "src": "24:33:8"
      },
      {
        "baseContracts": [],
        "contractDependencies": [],
        "contractKind": "contract",
        "documentation": null,
        "fullyImplemented": true,
        "id": 1939,
        "linearizedBaseContracts": [
          1939
        ],
        "name": "MovementHistory",
        "nodeType": "ContractDefinition",
        "nodes": [
          {
            "canonicalName": "MovementHistory.Movement",
            "id": 1938,
            "members": [
              {
                "constant": false,
                "id": 1931,
                "name": "amount",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "117:13:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_int256",
                  "typeString": "int256"
                },
                "typeName": {
                  "id": 1930,
                  "name": "int256",
                  "nodeType": "ElementaryTypeName",
                  "src": "117:6:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1933,
                "name": "description",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "140:18:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_string_storage_ptr",
                  "typeString": "string"
                },
                "typeName": {
                  "id": 1932,
                  "name": "string",
                  "nodeType": "ElementaryTypeName",
                  "src": "140:6:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_string_storage_ptr",
                    "typeString": "string"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1935,
                "name": "date",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "168:9:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 1934,
                  "name": "uint",
                  "nodeType": "ElementaryTypeName",
                  "src": "168:4:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1937,
                "name": "to",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "187:10:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 1936,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "187:7:8",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "value": null,
                "visibility": "internal"
              }
            ],
            "name": "Movement",
            "nodeType": "StructDefinition",
            "scope": 1939,
            "src": "91:113:8",
            "visibility": "public"
          }
        ],
        "scope": 1940,
        "src": "59:2334:8"
      }
    ],
    "src": "0:2393:8"
  },
  "legacyAST": {
    "absolutePath": "/home/jordi/ws/jordiescudero/bloomen-wallet/bloomen-wallet-truffle/contracts/bloomen/token/MovementHistory.sol",
    "exportedSymbols": {
      "MovementHistory": [
        1939
      ]
    },
    "id": 1940,
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 1928,
        "literals": [
          "solidity",
          "^",
          "0.5",
          ".2"
        ],
        "nodeType": "PragmaDirective",
        "src": "0:23:8"
      },
      {
        "id": 1929,
        "literals": [
          "experimental",
          "ABIEncoderV2"
        ],
        "nodeType": "PragmaDirective",
        "src": "24:33:8"
      },
      {
        "baseContracts": [],
        "contractDependencies": [],
        "contractKind": "contract",
        "documentation": null,
        "fullyImplemented": true,
        "id": 1939,
        "linearizedBaseContracts": [
          1939
        ],
        "name": "MovementHistory",
        "nodeType": "ContractDefinition",
        "nodes": [
          {
            "canonicalName": "MovementHistory.Movement",
            "id": 1938,
            "members": [
              {
                "constant": false,
                "id": 1931,
                "name": "amount",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "117:13:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_int256",
                  "typeString": "int256"
                },
                "typeName": {
                  "id": 1930,
                  "name": "int256",
                  "nodeType": "ElementaryTypeName",
                  "src": "117:6:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1933,
                "name": "description",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "140:18:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_string_storage_ptr",
                  "typeString": "string"
                },
                "typeName": {
                  "id": 1932,
                  "name": "string",
                  "nodeType": "ElementaryTypeName",
                  "src": "140:6:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_string_storage_ptr",
                    "typeString": "string"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1935,
                "name": "date",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "168:9:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 1934,
                  "name": "uint",
                  "nodeType": "ElementaryTypeName",
                  "src": "168:4:8",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "value": null,
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 1937,
                "name": "to",
                "nodeType": "VariableDeclaration",
                "scope": 1938,
                "src": "187:10:8",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 1936,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "187:7:8",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "value": null,
                "visibility": "internal"
              }
            ],
            "name": "Movement",
            "nodeType": "StructDefinition",
            "scope": 1939,
            "src": "91:113:8",
            "visibility": "public"
          }
        ],
        "scope": 1940,
        "src": "59:2334:8"
      }
    ],
    "src": "0:2393:8"
  },
  "compiler": {
    "name": "solc",
    "version": "0.5.7+commit.6da8b019.Emscripten.clang"
  },
  "networks": {},
  "schemaVersion": "3.0.6",
  "updatedAt": "2019-04-16T12:42:43.594Z",
  "devdoc": {
    "methods": {}
  },
  "userdoc": {
    "methods": {}
  }
}